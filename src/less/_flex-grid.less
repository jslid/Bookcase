/* Bookcase - Flex Grid */

	// - Flexbox Common
	// - Flex Directions
	// - Flex Columns and Positioning


// Inspiration from the following flexbox grids: 
		
		// - https://github.com/ptb/flexgrid
		// - https://github.com/alexander-ruehle/bobscss
		// - https://github.com/kristoferjoseph/flexboxgrid
		// - https://github.com/zemirco/flexbox-grid
		// - https://github.com/philipwalton/solved-by-flexbox


// FLEXBOX COMMON

	.flexbox-common {
		.box-sizing(border-box);
		.flexbox-container;
		.flex(1, 0, auto);
		.flex-wrap(wrap);
		.margin-left(-@flex-gutter);
		.margin-right(-@flex-gutter);
	}


// FLEXBOX ROWS & COLUMNS

	.flex-row {
		.flexbox-common;
		.flex-direction(row);
	}

	.flex-row-reverse {
		.flexbox-common;
		.flex-direction(row-reverse);
	}

	.flex-column {
		.flexbox-common;
		.flex-direction(column);
	}

	.flex-column-reverse {
		.flexbox-common;
		.flex-direction(column-reverse);
	}


// FLEX COLUMNS & POSITIONING

	// Mobile/Extra Small (xs) Grid - Columns and Offsets

		// Build Flex Columns

		.build-flex-columns(@name; @flex-columns; @index: 1) when (@index =< @flex-columns) {
		  .build-flex-columns(@name; @flex-columns; (@index + 1));
		   
		  .@{name}-@{index}, .@{name}-@{index}-xs {
		    -ms-flex-preferred-size: ( percentage(@index / @flex-columns) );
		    -webkit-flex-basis: ( percentage(@index / @flex-columns) );
		    -flex-basis: ( percentage(@index / @flex-columns) );
		    max-width: ( percentage(@index / @flex-columns) );
		    & when ( @index < @flex-columns ) {
		      &:extend(.flex);
		    }
		  } 
		}

		.flex, .flex-xs {
			.box-sizing(border-box);
			.flex(0, 0, auto);
			.padding-left(@flex-gutter);
			.padding-right(@flex-gutter);
			display: flex;
			-webkit-flex-direction: column;
			-ms-flex-direction: column;
			flex-direction: column;
		}

		.build-flex-columns(flex; @flex-columns);


		// Flex Positioning

		.flex-start, .flex-start-xs {
			.flex-justify(flex-start);
		}

		.flex-center, .flex-center-xs {
			.flex-justify(center);
		}

		.flex-end, .flex-end-xs {
			.flex-justify(flex-end);
		}

		.flex-around, .flex-around-xs {
			.flex-justify(space-around);
		}

		.flex-between, .flex-between-xs {
			.flex-justify(space-between);
		}

		.flex-top, .flex-top-xs {
			.flex-align-items(flex-start);
		}

		.flex-middle, .flex-middle-xs {
			.flex-align-items(center);
		}

		.flex-bottom, .flex-bottom-xs {
			.flex-align-items(flex-end);
		}

		.flex-stretch, .flex-stretch-xs {
			.flex-align-items(stretch);
		}

		.flex-baseline, .flex-baseline-xs {
			.flex-align-items(baseline);
		}

		// Flex Order

		.flex-order-start, .flex-order-start-xs {
			.flex-order(-1);
		}

		.flex-order-end, .flex-order-end-xs {
			.flex-order(1);
		}


	// Phablet/Small (sm) Flex Grid - Columns and Offsets

	@media only screen and (min-width: @breakpoint-phablet) {

		// Build Columns

		.flex-columns-phablet(@name; @flex-columns; @index: 1) when (@index =< @flex-columns) {
		  .flex-columns-phablet(@name; @flex-columns; (@index + 1));
		   
		  .@{name}-@{index}-phablet, .@{name}-@{index}-sm {
		    -ms-flex-preferred-size: ( percentage(@index / @flex-columns) );
		    -webkit-flex-basis: ( percentage(@index / @flex-columns) );
		    -flex-basis: ( percentage(@index / @flex-columns) );
		    max-width: ( percentage(@index / @flex-columns) );
		    & when ( @index < @grid-columns ) {
		      &:extend(.flex-phablet);
		    }
		  } 
		}

		.flex-phablet, .flex-sm {
			.box-sizing(border-box);
			.flex(0, 0, auto);
			.padding-left(@flex-gutter-phablet);
			.padding-right(@flex-gutter-phablet);
			display: flex;
			-webkit-flex-direction: column;
			-ms-flex-direction: column;
			flex-direction: column;
		}

		.flex-columns-phablet(flex; @flex-columns);


		// Flex Positioning

		.flex-start-phablet, .flex-start-sm {
			.flex-justify(flex-start);
		}

		.flex-center-phablet, .flex-center-sm {
			.flex-justify(center);
		}

		.flex-end-phablet, .flex-end-sm {
			.flex-justify(flex-end);
		}

		.flex-around-phablet, .flex-around-sm {
			.flex-justify(space-around);
		}

		.flex-between-phablet, .flex-between-sm {
			.flex-justify(space-between);
		}

		.flex-top-phablet, .flex-top-sm {
			.flex-align-items(flex-start);
		}

		.flex-middle-phablet, .flex-middle-sm {
			.flex-align-items(center);
		}

		.flex-bottom-phablet, .flex-bottom-sm {
			.flex-align-items(flex-end);
		}

		.flex-stretch-phablet, .flex-stretch-sm {
			.flex-align-items(stretch);
		}

		.flex-baseline-phablet, .flex-baseline-sm {
			.flex-align-items(baseline);
		}

		// Flex Order

		.flex-order-start-phablet, .flex-order-start-sm {
			.flex-order(-1);
		}

		.flex-order-end-phablet, .flex-order-end-sm {
			.flex-order(1);
		}

	}

	

	// Tablet/Medium (md) Flex Grid - Columns and Offsets

	@media only screen and (min-width: @breakpoint-tablet) {

		// Build Columns

		.flex-columns-tablet(@name; @flex-columns; @index: 1) when (@index =< @flex-columns) {
		  .flex-columns-tablet(@name; @flex-columns; (@index + 1));
		   
		  .@{name}-@{index}-tablet, .@{name}-@{index}-md {
		    -ms-flex-preferred-size: ( percentage(@index / @flex-columns) );
		    -webkit-flex-basis: ( percentage(@index / @flex-columns) );
		    -flex-basis: ( percentage(@index / @flex-columns) );
		    max-width: ( percentage(@index / @flex-columns) );
		    & when ( @index < @grid-columns ) {
		      &:extend(.flex-tablet);
		    }
		  } 
		}

		.flex-tablet, .flex-md {
			.box-sizing(border-box);
			.flex(0, 0, auto);
			.padding-left(@flex-gutter-tablet);
			.padding-right(@flex-gutter-tablet);
			display: flex;
			-webkit-flex-direction: column;
			-ms-flex-direction: column;
			flex-direction: column;
		}

		.flex-columns-tablet(flex; @flex-columns);


		// Flex Positioning

		.flex-start-tablet, .flex-start-md {
			.flex-justify(flex-start);
		}

		.flex-center-tablet, .flex-center-md {
			.flex-justify(center);
		}

		.flex-end-tablet, .flex-end-md {
			.flex-justify(flex-end);
		}

		.flex-around-tablet, .flex-around-md {
			.flex-justify(space-around);
		}

		.flex-between-tablet, .flex-between-md {
			.flex-justify(space-between);
		}

		.flex-top-tablet, .flex-top-md {
			.flex-align-items(flex-start);
		}

		.flex-middle-tablet, .flex-middle-md {
			.flex-align-items(center);
		}

		.flex-bottom-tablet, .flex-bottom-md {
			.flex-align-items(flex-end);
		}

		.flex-stretch-tablet, .flex-stretch-md {
			.flex-align-items(stretch);
		}

		.flex-baseline-tablet, .flex-baseline-md {
			.flex-align-items(baseline);
		}

		// Flex Order

		.flex-order-start-tablet, .flex-order-start-md {
			.flex-order(-1);
		}

		.flex-order-end-tablet, .flex-order-end-md {
			.flex-order(1);
		}

	}


	// Desktop/Large (lg) Flex Grid - Columns and Offsets

	@media only screen and (min-width: @breakpoint-desktop) {

		// Build Columns

		.flex-columns-desktop(@name; @flex-columns; @index: 1) when (@index =< @flex-columns) {
		  .flex-columns-desktop(@name; @flex-columns; (@index + 1));
		   
		  .@{name}-@{index}-desktop, .@{name}-@{index}-lg {
		    -ms-flex-preferred-size: ( percentage(@index / @flex-columns) );
		    -webkit-flex-basis: ( percentage(@index / @flex-columns) );
		    -flex-basis: ( percentage(@index / @flex-columns) );
		    max-width: ( percentage(@index / @flex-columns) );
		    & when ( @index < @grid-columns ) {
		      &:extend(.flex-desktop);
		    }
		  } 
		}

		.flex-desktop, .flex-lg {
			.box-sizing(border-box);
			.flex(0, 0, auto);
			.padding-left(@flex-gutter-desktop);
			.padding-right(@flex-gutter-desktop);
			display: flex;
			-webkit-flex-direction: column;
			-ms-flex-direction: column;
			flex-direction: column;
		}

		.flex-columns-desktop(flex; @flex-columns);


		// Flex Positioning

		.flex-start-desktop, .flex-start-lg {
			.flex-justify(flex-start);
		}

		.flex-center-desktop, .flex-center-lg {
			.flex-justify(center);
		}

		.flex-end-desktop, .flex-end-lg {
			.flex-justify(flex-end);
		}

		.flex-around-desktop, .flex-around-lg {
			.flex-justify(space-around);
		}

		.flex-between-desktop, .flex-between-lg {
			.flex-justify(space-between);
		}

		.flex-top-desktop, .flex-top-lg {
			.flex-align-items(flex-start);
		}

		.flex-middle-desktop, .flex-middle-lg {
			.flex-align-items(center);
		}

		.flex-bottom-desktop, .flex-bottom-lg {
			.flex-align-items(flex-end);
		}

		.flex-stretch-desktop, .flex-stretch-lg {
			.flex-align-items(stretch);
		}

		.flex-baseline-desktop, .flex-baseline-lg {
			.flex-align-items(baseline);
		}

		// Flex Order

		.flex-order-start-desktop, .flex-order-start-lg {
			.flex-order(-1);
		}

		.flex-order-end-desktop, .flex-order-end-lg {
			.flex-order(1);
		}
	}


	// HD/Extra Large (xl) Flex Grid - Columns and Offsets

	@media only screen and (min-width: @breakpoint-hd) {

		// Build Columns

		.flex-columns-hd(@name; @flex-columns; @index: 1) when (@index =< @flex-columns) {
		  .flex-columns-hd(@name; @flex-columns; (@index + 1));
		   
		  .@{name}-@{index}-hd, .@{name}-@{index}-xl {
		    -ms-flex-preferred-size: ( percentage(@index / @flex-columns) );
		    -webkit-flex-basis: ( percentage(@index / @flex-columns) );
		    -flex-basis: ( percentage(@index / @flex-columns) );
		    max-width: ( percentage(@index / @flex-columns) );
		    & when ( @index < @grid-columns ) {
		      &:extend(.flex-hd);
		    }
		  } 
		}

		.flex-hd, .flex-xl {
			.box-sizing(border-box);
			.flex(0, 0, auto);
			.padding-left(@flex-gutter-hd);
			.padding-right(@flex-gutter-hd);
			display: flex;
			-webkit-flex-direction: column;
			-ms-flex-direction: column;
			flex-direction: column;
		}

		.flex-columns-hd(flex; @flex-columns);


		// Flex Positioning

		.flex-start-hd, .flex-start-xl {
			.flex-justify(flex-start);
		}

		.flex-center-hd, .flex-center-xl {
			.flex-justify(center);
		}

		.flex-end-hd, .flex-end-xl {
			.flex-justify(flex-end);
		}

		.flex-around-hd, .flex-around-xl {
			.flex-justify(space-around);
		}

		.flex-between-hd, .flex-between-xl {
			.flex-justify(space-between);
		}

		.flex-top-hd, .flex-top-xl {
			.flex-align-items(flex-start);
		}

		.flex-middle-hd, .flex-middle-xl {
			.flex-align-items(center);
		}

		.flex-bottom-hd, .flex-bottom-xl {
			.flex-align-items(flex-end);
		}

		.flex-stretch-hd, .flex-stretch-xl {
			.flex-align-items(stretch);
		}

		.flex-baseline-hd, .flex-baseline-xl {
			.flex-align-items(baseline);
		}

		// Flex Order

		.flex-order-start-hd, .flex-order-start-xl {
			.flex-order(-1);
		}

		.flex-order-end-hd, .flex-order-end-xl {
			.flex-order(1);
		}
	}
